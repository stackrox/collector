name: Retag and push collector images
description: |
  This action will, as stated in its name, retag and push collector images

inputs:
  src-image:
    description: |
      The image that will be retagged
    required: true
  dst-image:
    description: |
      A target image that will be generated by retagging src-image and later
      pushed
    required: true
  username:
    description: |
      Username used to login to the repository the push is aimed at
    required: true
  password:
    description: |
      Password used to login to the repository the push is aimed at
    required: true
  registry:
    description:
      Registry used for pushing the image
    default: quay.io

runs:
  using: "composite"
  steps:
    - uses: docker/login-action@v2
      with:
        registry: ${{ inputs.registry }}
        username: ${{ inputs.username }}
        password: ${{ inputs.password }}

    - shell: bash
      run: |
        docker tag ${{ inputs.src-image }} ${{ inputs.dst-image }}
        docker push ${{ inputs.dst-image }}
