name: Collector Integration Tests
  
on: 
  pull_request:
    branches:
      - master
  push:
    branches:
      - master

jobs:
  integration-tests:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        vm_type:
          - rhel
          - ubuntu-os
          - cos
          - flatcar
          - fedora-coreos
          - rhel-sap
          - sles
          - garden-linux
    steps:
      - name: Run integration tests on ${{ matrix.vm_type }}
        uses: ./.github/workflows/integration-tests-vm-type.yml
        with:
          vm_type: ${{ matrix.vm_type }}
          collector_tag: 3.12.0

